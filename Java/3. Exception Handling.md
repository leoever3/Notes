### Exception Handling

* An **exception** is a Java object that represents a condition that prevents execution from proceeding normally. If those problems are not dealt with by exception handling features, the program would crash without getting a chance to come a natural halt.
* Exception handling is a feature used in Java to treat run time errors.

![image-20211130161812003](/Users/morningstar/Library/Application Support/typora-user-images/image-20211130161812003.png)

* Two types of execution: **checked exceptions** (must be caught) and **unchecked exceptions**

* **try-catch-finally block**

```java
try {
  //proected code block
} catch (FileIOException e1)(
  //catch block
  ex.printStackTrace();
) catch (Exception e2) {
  //catch block
} finally {
  // always executes
}
```

* **throw exception**
* in the try block
  
* in the method declaration

```java
try {
  throw new Exception();
}
public void test() throws Exception {}
```

##### Some well-known exceptions

* NullPointerException
* ClassNotFoundException
* ArrayIndexOutofBoundException
* ClassCastException
* IOException
* IllegalArgumentException
* NumberFormatException
* FileNOtFoundException

Some well-known errors (can not be handled)

Errors are thrown by **JVM**.

* ExceptionInInitializerError
* StackOverflowError
* NoClassDefFoundError
* OutOfMemoryError

##### Some notes

* Try to be **specific** with the exceptions as much as possible
* Exception should be in the **last** catch

### FIle and I/O

<u>Why we store data on file?</u>

Memories are limited and expensive. Disk is used as a permanent storage of the data.

**Memories** is associated with fast access, small size and temporary storage.  Data Structures

**Disk** is associated with slow access, large size and permanent storage.  Database management system

<u>File or Databases?</u>

When the data gets large it is cumbersome procee to find an information from file.

Querying information from raw file is not efficient (time energy). So databases have been introduced.

#### FIles in Java

* Java treats a file as as **sequential stream of bytes**.

* **End-of-file**
* **Text files** (.txt, .csv) & **binary files **(.mp3, .pdf)

```java
		File f = new File("test.txt");
		if (f.exists()) {}
```

##### Stream

* Stream is a never ending dataset

#### Java.io

* Stream classes are used to read/write any binary files. .mp3
  * File**InputStream**
  * File**OutputStream**

```java
// it reads a byte at a time and stores into the 'byt' variable
// 8-bits   raw binary files
int byt;
while((byt = fileInputStream.read()) != -1) {
    fileOutputStream.write(byt);
}
```

* Reader/writer classes are used to read/write character/String files.  .txt
  * File**Reader**
  * File**Writer**

```java
// it reads 2 or 4 bytes at a time
// 2/4 bytes(depends on the charset)
int c;
while ( (c = fileReader.read()) != -1) 
```

##### low level & high level Streams

* Low level streams connects **directly** to the file on the disk.
* High level streams are built on top of another streams using **wrapping**.  ***<u>Buffered</u>***
  * **Buffered** classes are reading or writing data in a chunk and not by byte.
  * **BufferedReader** & **BufferedWriter**

```java
// To create a buffer of data, before processing
// A BufferedReader object takes a FileReader object as an input which contains all the necessary information about the text file that needs to be read. (such as the file path and charset.)
BufferedReader br = new BufferedReader( new FileReader("example.txt") );
```

##### Serialization % Deserialization

* Serialization: the process of converting an in-memory object to a stored data format (**String**)
* Deserialization: the process of covering stored data into an object

##### Absolute & Relative Path

URI(Uniform Resource Indicator)

* Windows: \\\C:\example.txt
* Unix: /home/username/test.txt

### Regular Expression

* "." Represents matching any single character. "Book" matches "Bo.k"
  * "?" in SQL or shell scripting represents any single character
  * "*" represents any number of possible characters
* "[abc]" means one of the three characters.  "bxa" matches  "bx[abc]"

### Codes example

```java
import java.io.*;
public class FileMerge {
	public static void main(String[] args) {
		/*3 inputs merge into 1 output*/
		BufferedReader input1 = null;
		BufferedReader input2 = null;
		BufferedReader input3 = null;
        BufferedWriter output = null;
        String line = "";
        try {
        	File file0 = new File("/Users/morningstar/Desktop/HM4/merge.csv");
        	File file1 = new File("/Users/morningstar/Desktop/HM4/1.csv");
        	File file2 = new File("/Users/morningstar/Desktop/HM4/2.csv");
        	File file3 = new File("/Users/morningstar/Desktop/HM4/3.csv");
            input1 = new BufferedReader(new FileReader(file1));
            input2 = new BufferedReader(new FileReader(file2));
            input3 = new BufferedReader(new FileReader(file3));
            output = new BufferedWriter(new FileWriter(file0));
            while ((line = input1.readLine()) != null) {
            	output.write(line);
            	output.newLine();
            }
            while ((line = input2.readLine()) != null) {
            	output.write(line);
            	output.newLine();
            }
            while ((line = input3.readLine()) != null) {
            	output.write(line);
            	output.newLine();
            }
            System.out.println("FIleMerge succeed!");
        } catch (FileNotFoundException e ) {
            e.printStackTrace();
        } catch (IOException e ) {
            e.printStackTrace();
        } finally {
        	try {
	        	input1.close();
	        	input2.close();
	        	input3.close();
	            output.close();
        	} catch (IOException e ) {
        		e.printStackTrace();
        	} 
        }
	}
}
```

